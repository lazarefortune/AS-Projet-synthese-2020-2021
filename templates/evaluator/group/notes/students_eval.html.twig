{% extends "layouts/admin.html.twig" %}

{% block stylesheets %}
    <link href="{{ asset('assets/css/note.css') }}" rel="stylesheet">
{% endblock %}

{% block admin_content %}


<div class="vue_content">        
    <p class="mb-3"> <span style="border-bottom: solid 1px #346cb0;" class="pb-1">Groupe n° {{ groupe.numero }} / {{ groupe.idProjet.titre }}</span></p>
    <h1 class="text-center my-sm-0 my-lg-5">Evaluation individuelle</h1>

    {% include 'layouts/flash-messages.html.twig' %}

    <form method="POST">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col" class="eval_title align-middle">Nom de l'étudiant</th>
                        <th scope="col" class="eval_title align-middle">Qualité du rapport </br> <span>/20 points. coeff. 1</span></th>
                        <th scope="col" class="eval_title align-middle">Travail réalisé. Etat d'avancement du projet </br> <span>/20 points. coeff. 2</span></th>
                        <th scope="col" class="eval_title align-middle">Utilisation de compétences nouvelles </br> <span>/20 points. coeff. 2</span></th>
                        <th scope="col" class="eval_title align-middle">Pourcentage travail réalisé</th>
                        <th scope="col" class="eval_title align-middle">Moyenne</th>
                    </tr>
                </thead>
                
                <tbody>
                {% for etudiant in etudiants %}
                    <tr>
                        <td class="eval_name">{{ etudiant.idUser.nom }} {{ etudiant.idUser.prenom }}</td>

                        
                        <td class="eval_input align-middle">
                            <input onchange="moyenne({{ etudiant.idEtud }})" onkeyup="moyenne({{ etudiant.idEtud }})" value="{{ etudiant.noteTutRapport }}" type="number" min="0" max="20" size="2" step="0.5"
                                    id="note_rapport_{{ etudiant.idEtud }}" name="noteTutRapport{{ etudiant.idEtud }}" class="form-control form-control-sm" required></input>
                        </td>
                        
                        <td class="eval_input align-middle">
                            <input onchange="moyenne({{ etudiant.idEtud }})" onkeyup="moyenne({{ etudiant.idEtud }})" value="{{ etudiant.noteTutTrav }}" type="number" min="0" max="20" size="2" step="0.5" 
                                   id="note_travail_{{ etudiant.idEtud }}" name="noteTutTrav{{ etudiant.idEtud }}" class="form-control form-control-sm" required></input>
                        </td>
                        
                        <td class="eval_input align-middle">
                            <input onchange="moyenne({{ etudiant.idEtud }})" onkeyup="moyenne({{ etudiant.idEtud }})" value="{{ etudiant.noteTutCompet }}" type="number" min="0" max="20" size="2" step="0.5"
                                   id="note_competences_{{ etudiant.idEtud }}" name="noteTutCompet{{ etudiant.idEtud }}" class="form-control form-control-sm" required></input>
                        </td>
                        
                        <td class="eval_input align-middle">
                            <input onchange="moyenne({{ etudiant.idEtud }})" onkeyup="moyenne({{ etudiant.idEtud }})" value="{{ etudiant.pourcentTravail }}"  type="number" min="0" max="100" size="2" style=""
                                   id="notepourcentage{{ etudiant.idEtud }}" name="pourcentTravail{{ etudiant.idEtud }}" class="form-control form-control-sm" required></input>
                        </td>
                        
                        <td class="eval_input align-middle">
                            <input type="text" name="noteFinale{{ etudiant.idEtud }}" class="form-control form-control-sm"
                                   id="note_moyenne_{{ etudiant.idEtud }}" name="noteFinale{{ etudiant.idEtud }}" value="{{ etudiant.noteFinale }}" style="text-align:center;" readonly>
                        </td>
                    </tr>
                    {% endfor %}
                    
                </tbody>
            </table>

            <div class="d-flex justify-content-between w-75 mx-auto bouton">
                <div>
                    <button class="btn btn-success" type="submit">Enregistrer</button>
                    
                </div>
            </div>
        </div>
    </form>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#retourGroupe">Retour</button>
    <div class="modal fade" id="retourGroupe" tabindex="-1" aria-labelledby="retourGroupeLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Retour sélection du groupe</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                Les notes insérées / modifiées seront perdues si vous quitter cette page.
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                                <a  href="{{ path('eval_group_list') }}" class="btn btn-primary">Continuer</a>
                            </div>
                            </div>
                        </div>
                    </div>
</div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('assets/js/indiv_moy.js') }}"></script>
{% endblock %}